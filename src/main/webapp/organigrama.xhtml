<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/template.xhtml">

	<ui:define name="content">

		<h:form id="form">

			<style>
.ui-organigram .ui-organigram-node.dimension {
	background: #88c048;
	background: -moz-linear-gradient(top, #88c048 0%, #9cdc53 100%);
	background: -webkit-linear-gradient(top, #88c048 0%, #9cdc53 100%);
	background: linear-gradient(to bottom, #88c048 0%, #9cdc53 100%);
}

.ui-organigram .ui-organigram-node.objetivo {
	background: #fca752;
	background: -moz-linear-gradient(top, #fca752 0%, #f7b36f 100%);
	background: -webkit-linear-gradient(top, #fca752 0%, #f7b36f 100%);
	background: linear-gradient(to bottom, #fca752 0%, #f7b36f 100%);
	background: -moz-linear-gradient(top, #fca752 0%, #f7b36f 100%);
}

.ui-organigram .ui-organigram-node.programa {
	background: #60a7ff;
	background: -moz-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: -webkit-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: linear-gradient(to bottom, #60a7ff 0%, #74b0fb 100%);
}

.ui-organigram .ui-organigram-node.subprograma {
	background: #ff0049
	background: -moz-linear-gradient(top, #ff0049 0%, #d42c5c 100%);
	background: -webkit-linear-gradient(top, #ff0049 0%, #d42c5c 100%);
	background: linear-gradient(to bottom, #ff0049 0%, #d42c5c 100%);
}

.ui-organigram .ui-organigram-node.proyecto {
	background: #60a7ff;
	background: -moz-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: -webkit-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: linear-gradient(to bottom, #60a7ff 0%, #74b0fb 100%);
}

.ui-organigram .ui-organigram-node.detalleProyecto {
	background: #60a7ff;
	background: -moz-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: -webkit-linear-gradient(top, #60a7ff 0%, #74b0fb 100%);
	background: linear-gradient(to bottom, #60a7ff 0%, #74b0fb 100%);
}
</style>

			<p:growl id="growl" />

			<!-- INICIO ORGNIGRAMA -->
			<p:organigram id="organigram" widgetVar="organigram"
				value="#{organigramView.rootNode}" var="node"
				zoom="#{organigramView.zoom}" selection="#{organigramView.selection}"
				style="#{organigramView.style}">

				<p:ajax event="select" process="@this" update="@form:growl"
					listener="#{organigramView.nodeSelectListener}" />
				<p:ajax event="contextmenu" process="@this"/>
				<p:ajax event="collapse" process="@this" update="@form:growl"
					listener="#{organigramView.nodeCollapseListener}" />
				<p:ajax event="expand" process="@this" update="@form:growl"
					listener="#{organigramView.nodeExpandListener}" />

				<p:organigramNode>
					<h:outputText value="#{node.data}" />
				</p:organigramNode>

				<p:organigramNode type="root" style="border-radius: 10px;">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>

				<p:organigramNode type="dimension" styleClass="dimension"
					icon="ui-icon-suitcase" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>

				<p:organigramNode type="objetivo" styleClass="objetivo"
					icon="fa fa-fw fa-bullseye" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>

				<p:organigramNode type="programa" styleClass="programa"
					icon="ui-icon-suitcase" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>
				
				<p:organigramNode type="subprograma" styleClass="subprograma"
					icon="ui-icon-suitcase" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>
				
				<p:organigramNode type="proyecto" styleClass="proyecto"
					icon="ui-icon-suitcase" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>
				
				<p:organigramNode type="detalleProyecto" styleClass="detalleProyecto"
					icon="ui-icon-suitcase" iconPos="left">
					<h:outputText value="#{node.data}" />
				</p:organigramNode>
			</p:organigram>
			<!-- FIN ORGNIGRAMA -->

			<!-- OPCIONES NODO ORGANIGRAMA -->
			<p:contextMenu for="organigram" nodeType="root">
				<p:menuitem value="Añadir Dimensión" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirDimension').show(); return false;" />
				<p:menuitem value="Detalles" update="organigram @form:growl"
					icon="ui-icon-info"/>
			</p:contextMenu>
			
			<p:contextMenu for="organigram" nodeType="dimension">
				<p:menuitem value="Añadir Objetivo" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirObjetivo').show(); return false;" />
			</p:contextMenu>
			
			<p:contextMenu for="organigram" nodeType="objetivo">
				<p:menuitem value="Añadir Programa" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirPrograma').show(); return false;" />
			</p:contextMenu>
			
			<p:contextMenu for="organigram" nodeType="programa">
				<p:menuitem value="Añadir Subprograma" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirSubprograma').show(); return false;" />
				<p:menuitem value="Detalles" update="organigram @form:growl"
					icon="ui-icon-info"/>
			</p:contextMenu>
			
			<p:contextMenu for="organigram" nodeType="subprograma">
				<p:menuitem value="Añadir Proyecto" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirProyecto').show(); return false;" />
			</p:contextMenu>
			
			<p:contextMenu for="organigram" nodeType="proyecto">
				<p:menuitem value="Añadir Objetivo" ajax="false"
					icon="ui-icon-plus"
					onclick="PF('dlgAnadirObjetivo').show(); return false;" />
			</p:contextMenu>
			<!-- FIN OPCIONES NODO ORGANIGRAMA -->
		</h:form>

		<h:form id="formOpciones">
			<p:panel header="Opciones">
				<h:panelGrid columns="1">
				<div align="center">
					<p:commandButton value="Guardar" actionListener="#{organigramView.actionGuardar}" />
				</div>
				</h:panelGrid>
			</p:panel>
		</h:form>
		<h:form id="formModal">

			<!-- ************************************************** -->
			<!-- **			 DIÁLOGO AÑADIR PLAN			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirPlan" header="Crear Plan"
				widgetVar="dlgAnadirPlan" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true"
				style="width: 100% !important;">

				<p:messages id="msgPlan" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir Plan">
					<h:panelGrid columns="2" style="width: 100% !important">

						<h:outputText id="msgDescripcion" value=" Descripción del plan" />
						<p:inputTextarea id="txtDescripcion" disabled="false"
							binding="#{organigramView.txtAreaDescripcionPlan}" rows="6" cols="33"/>
						<h:outputText id="msgEslogan" value=" Eslogan del plan" />
						<p:inputTextarea id="txtEslogan" disabled="false"
							binding="#{organigramView.txtAreaEsloganPlan}" rows="6" cols="33"/>
						<h:outputText id="msgNombreAlcalde" value=" Nombre del Alcalde" />
						<p:inputText id="txtNombreAlcalde" disabled="false"
							binding="#{organigramView.txtNombreAlcaldePlan}" />

						<h:outputText id="msgAnoInicio" value=" Año de inicio del plan" />
						<p:calendar showOn="button" navigator="true" locale="en"
							binding="#{organigramView.txtAnoInicioPlan}">
							<p:ajax event="dateSelect"
								listener="#{organigramView.listener_txtAnoInicio}" />
						</p:calendar>
						<h:outputText id="msgAnoFin" value=" Año de finalización del plan" />
						<p:calendar showOn="button" navigator="true" locale="en"
							binding="#{organigramView.txtAnoFinPlan}">
							<p:ajax event="dateSelect"
								listener="#{organigramView.listener_txtAnoFin}" />
						</p:calendar>

					</h:panelGrid>

				</p:panel>

				<br />

				<div align="center">

					<p:commandButton value="Añadir"
						binding="#{organigramView.btnAnadirPlan}"
						action="#{organigramView.anadirPlanAction}"
						update=":formModal:msgPlan" />

				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR PLAN -->

			<!-- ************************************************** -->
			<!-- **			 DIÁLOGO AÑADIR DIMENSIÓN			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirDimension" header="Dimensión"
				widgetVar="dlgAnadirDimension" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true"
				style="width: 100% !important;">

				<p:messages id="msgDimension" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir dimensión">
					<h:panelGrid columns="2" style="width: 100% !important">

						<p:outputLabel value="Dimensión:" />
						<p:inputText id="txtDimension" placeholder="Escriba la dimension"
							binding="#{organigramView.txtDimension}" />

					</h:panelGrid>

				</p:panel>

				<br />

				<div align="center">

					<p:commandButton value="Añadir"
						actionListener="#{organigramView.anadirDimensionAction}" 
						update=":form:organigram" oncomplete="PF('dlgAnadirDimension').hide();"/>

					<p:commandButton value="Cancelar" icon="ui-icon-close"
						update=":formModal"
						action="#{organigramView.actionCerrarDialogAnadirDimension}" />

				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR DIMENSIÓN -->

			<!-- ************************************************** -->ge
			<!-- **			 DIÁLOGO AÑADIR OBJETIVO			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirObjetivo" header="Objetivo"
				widgetVar="dlgAnadirObjetivo" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true">

				<p:messages id="msgObjetivo" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir Objetivo">
					<h:panelGrid columns="2">

						<p:outputLabel value="Objetivo:" />
						<p:inputTextarea id="txtDescripcionObjetivo" rows="6" cols="33"
							binding="#{organigramView.txtAreaDescObjetivo}" placeholder="Ingrese una descripción para el objetivo"/>

					</h:panelGrid>
				</p:panel>

				<br />

				<div align="center">
					<p:commandButton value="Añadir"
						actionListener="#{organigramView.anadirObjetivoAction}"
						update=":form:organigram" 
						oncomplete="PF('dlgAnadirObjetivo').hide();"/>

					<p:commandButton value="Cancelar" icon="ui-icon-close"
						update=":formModal" />
				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR OBJETIVO -->

			<!-- ************************************************** -->
			<!-- **			 DIÁLOGO AÑADIR PROGRAMA			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirPrograma" header="Programa"
				widgetVar="dlgAnadirPrograma" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true"
				style="width: 100% !important;">

				<p:messages id="msgPrograma" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir Programa">
					<h:panelGrid columns="2" style="width: 100% !important">

						<p:outputLabel value="Programa:" />
						<p:inputTextarea id="txtAreaDescPrograma" rows="6" cols="33"
							binding="#{organigramView.txtAreaDescPrograma}" placeholder="Ingrese una descripción para el programa"/>
						

					</h:panelGrid>

				</p:panel>

				<br />

				<div align="center">

					<p:commandButton value="Añadir"
						actionListener="#{organigramView.anadirProgramaAction}"
						update=":form:organigram" oncomplete="PF('dlgAnadirPrograma').hide();" />

					<p:commandButton value="Cancelar" icon="ui-icon-close"
						update=":formModal" />

				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR PROGRAMA -->
			
			<!-- ************************************************** -->
			<!-- **			 DIÁLOGO AÑADIR SUBPROGRAMA			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirSubprograma" header="SubPrograma"
				widgetVar="dlgAnadirSubprograma" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true"
				style="width: 100% !important;">

				<p:messages id="msgSubPrograma" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir SubPrograma">
					<h:panelGrid columns="2" style="width: 100% !important">

						<p:outputLabel value="SubPrograma:" />
						<p:inputTextarea id="txtAreaDescSubPrograma" rows="6" cols="33"
							binding="#{organigramView.txtAreaDescSubPrograma}" placeholder="Ingrese una descripción para el subprograma"/>
						

					</h:panelGrid>

				</p:panel>

				<br />

				<div align="center">

					<p:commandButton value="Añadir"
						actionListener="#{organigramView.anadirSubProgramaAction}"
						update=":form:organigram" oncomplete="PF('dlgAnadirSubprograma').hide();" />

					<p:commandButton value="Cancelar" icon="ui-icon-close"
						update=":formModal" />

				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR SUBPROGRAMA -->
			
			<!-- ************************************************** -->
			<!-- **			 DIÁLOGO AÑADIR PROYECTO			 ** -->
			<!-- ************************************************** -->
			<p:dialog id="dlgAnadirProyecto" header="proyecto"
				widgetVar="dlgAnadirProyecto" modal="true" draggable="true"
				closable="false" resizable="true" responsive="true"
				style="width: 100% !important;">

				<p:messages id="msgProyecto" autoUpdate="true" closable="true"
					style="width: 100%;" />

				<p:panel header="Añadir Proyecto">
					<h:panelGrid columns="2" style="width: 100% !important">

						<p:outputLabel value="Proyecto" />
						<p:inputTextarea id="txtAreaDescProyecto" rows="6" cols="33"
							binding="#{organigramView.txtAreaDescProyecto}" placeholder="Ingrese una descripción para el proyecto"/>
						

					</h:panelGrid>

				</p:panel>

				<br />

				<div align="center">

					<p:commandButton value="Añadir"
						actionListener="#{organigramView.anadirProyectoAction}"
						update=":form:organigram" oncomplete="PF('dlgAnadirProyecto').hide();" />

					<p:commandButton value="Cancelar" icon="ui-icon-close"
						update=":formModal" />

				</div>

			</p:dialog>
			<!-- FIN DIÁLOGO AÑADIR PROYECTO -->
		</h:form>


	</ui:define>
</ui:composition>